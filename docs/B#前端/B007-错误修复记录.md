# é”™è¯¯ä¿®å¤è®°å½•

## ğŸ“‹ æ¦‚è¿°

è®°å½•é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯å’Œä¿®å¤æ–¹æ¡ˆï¼Œä¸ºåç»­å¼€å‘æä¾›å‚è€ƒã€‚

## ğŸ› å·²ä¿®å¤é”™è¯¯

### 1. ESLint å°¾éšé€—å·é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š

```
ERROR[eslint] src/components/common/MonacoEditor.tsx
Line 81:51: Unexpected trailing comma comma-dangle
```

**åŸå› **ï¼š

- ESLint é…ç½®ç¦æ­¢å°¾éšé€—å·
- æ•°ç»„æœ€åä¸€é¡¹åé¢æœ‰é€—å·

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// âŒ é”™è¯¯
[/^\d+\.\s.*$/, 'custom-ordered-list'],  // æœ€åæœ‰é€—å·

// âœ… æ­£ç¡®
[/^\d+\.\s.*$/, 'custom-ordered-list']   // ç§»é™¤å°¾éšé€—å·
```

**æ–‡ä»¶**ï¼š`frontend/src/components/common/MonacoEditor.tsx`

### 2. TypeScript ç±»å‹ä¸åŒ¹é…é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š

```
ERROR in src/components/auth/AuthModal.tsx:289:11
TS2322: Type 'Dispatch<SetStateAction<"login" | "register">>' is not assignable to type '(activeKey: string) => void'.
```

**åŸå› **ï¼š

- Ant Design Tabs çš„ onChange æœŸæœ› `(activeKey: string) => void`
- ä½† setActiveTab çš„ç±»å‹æ˜¯ `Dispatch<SetStateAction<'login' | 'register'>>`
- ç±»å‹ä¸å®Œå…¨åŒ¹é…

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// âŒ é”™è¯¯
<Tabs
    activeKey={activeTab}
    onChange={setActiveTab}  // ç±»å‹ä¸åŒ¹é…
    items={tabItems}
/>

// âœ… æ­£ç¡®
<Tabs
    activeKey={activeTab}
    onChange={(key) => setActiveTab(key as 'login' | 'register')}  // ç±»å‹è½¬æ¢
    items={tabItems}
/>
```

**æ–‡ä»¶**ï¼š`frontend/src/components/auth/AuthModal.tsx`

### 3. Props ä¸åŒ¹é…é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š

```
ERROR in src/components/layout/MainLayout.tsx:283:9
TS2322: Property 'onCancel' does not exist on type 'IntrinsicAttributes & AuthModalProps'.
```

**åŸå› **ï¼š

- AuthModal ç»„ä»¶çš„ Props å®šä¹‰æ˜¯ `onClose`
- ä½†åœ¨ä½¿ç”¨æ—¶ä¼ é€’çš„æ˜¯ `onCancel`
- Props åç§°ä¸ä¸€è‡´

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// AuthModal Props å®šä¹‰
interface AuthModalProps {
    visible: boolean;
    onClose: () => void;  // ä½¿ç”¨ onClose
    defaultTab?: 'login' | 'register';
}

// âŒ é”™è¯¯ä½¿ç”¨
<AuthModal
    visible={authModalVisible}
    onCancel={() => setAuthModalVisible(false)}  // é”™è¯¯çš„ prop å
    onLogin={handleLoginSubmit}
    onRegister={handleRegisterSubmit}
/>

// âœ… æ­£ç¡®ä½¿ç”¨
<AuthModal
    visible={authModalVisible}
    onClose={() => setAuthModalVisible(false)}  // æ­£ç¡®çš„ prop å
    defaultTab={authModalTab}
/>
```

**æ–‡ä»¶**ï¼š`frontend/src/components/layout/MainLayout.tsx`

## ğŸ” å¾…ä¿®å¤é”™è¯¯

### 1. Button ç»„ä»¶ç±»å‹å†²çª

**é”™è¯¯ä¿¡æ¯**ï¼š

```
src/components/common/Button.tsx(6,18): error TS2430:
Interface 'ButtonProps' incorrectly extends interface 'Omit<ButtonProps, "type" | "size">'.
Type '"primary"' is not assignable to type '"link" | "text" | "dashed" | "outlined" | "solid" | "filled" | undefined'.
```

**åŸå› **ï¼š

- è‡ªå®šä¹‰ ButtonProps ä¸ Ant Design ButtonProps çš„ variant ç±»å‹å†²çª
- éœ€è¦é‡æ–°è®¾è®¡ç±»å‹å®šä¹‰

**å»ºè®®ä¿®å¤**ï¼š

```typescript
// æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ä¸åŒçš„å±æ€§å
interface CustomButtonProps {
    buttonVariant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link' | 'text';
    // ...
}

// æ–¹æ¡ˆ 2ï¼šå®Œå…¨è‡ªå®šä¹‰ï¼Œä¸ç»§æ‰¿ Ant Design
interface ButtonProps {
    variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link' | 'text';
    size?: 'small' | 'medium' | 'large';
    // ...
}
```

### 2. Card ç»„ä»¶ç±»å‹å†²çª

**é”™è¯¯ä¿¡æ¯**ï¼š

```
src/components/common/Card.tsx(8,18): error TS2430:
Type '"default"' is not assignable to type '"outlined" | "borderless" | undefined'.
```

**åŸå› **ï¼š

- ç±»ä¼¼ Button ç»„ä»¶çš„é—®é¢˜
- variant ç±»å‹ä¸ Ant Design ä¸å…¼å®¹

**å»ºè®®ä¿®å¤**ï¼š

```typescript
// ä½¿ç”¨ä¸åŒçš„å±æ€§å
interface CustomCardProps {
    cardVariant?: 'default' | 'bordered' | 'shadow' | 'elevated';
    // ...
}
```

### 3. useDebounce Hook å‚æ•°é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š

```
src/hooks/useDebounce.ts(26,22): error TS2554: Expected 1 arguments, but got 0.
```

**åŸå› **ï¼š

- å‡½æ•°è°ƒç”¨ç¼ºå°‘å¿…éœ€å‚æ•°

**å»ºè®®ä¿®å¤**ï¼š

- æ£€æŸ¥å‡½æ•°å®šä¹‰å’Œè°ƒç”¨
- ç¡®ä¿å‚æ•°å®Œæ•´

## ğŸ“ ä¿®å¤æ¨¡å¼æ€»ç»“

### 1. ç±»å‹ä¸åŒ¹é…

**å¸¸è§åŸå› **ï¼š

- ç¬¬ä¸‰æ–¹åº“ç±»å‹å®šä¹‰å˜åŒ–
- è‡ªå®šä¹‰ç±»å‹ä¸åº“ç±»å‹å†²çª
- ç±»å‹æ¨å¯¼ä¸å‡†ç¡®

**ä¿®å¤ç­–ç•¥**ï¼š

1. ä½¿ç”¨ç±»å‹æ–­è¨€ `as`
2. ä½¿ç”¨ç±»å‹è½¬æ¢å‡½æ•°
3. é‡æ–°è®¾è®¡ç±»å‹å®šä¹‰
4. ä½¿ç”¨æ³›å‹çº¦æŸ

### 2. Props ä¸ä¸€è‡´

**å¸¸è§åŸå› **ï¼š

- ç»„ä»¶å®šä¹‰å’Œä½¿ç”¨ä¸åŒæ­¥
- é‡æ„æ—¶é—æ¼æ›´æ–°
- å‘½åä¸ç»Ÿä¸€

**ä¿®å¤ç­–ç•¥**ï¼š

1. ç»Ÿä¸€ Props å‘½åè§„èŒƒ
2. ä½¿ç”¨ TypeScript ç±»å‹æ£€æŸ¥
3. åŠæ—¶æ›´æ–°æ‰€æœ‰ä½¿ç”¨å¤„
4. ç¼–å†™å•å…ƒæµ‹è¯•

### 3. ESLint è§„åˆ™å†²çª

**å¸¸è§åŸå› **ï¼š

- ä»£ç é£æ ¼ä¸ä¸€è‡´
- é…ç½®è§„åˆ™è¿‡ä¸¥
- è‡ªåŠ¨æ ¼å¼åŒ–å†²çª

**ä¿®å¤ç­–ç•¥**ï¼š

1. ç»Ÿä¸€ ESLint é…ç½®
2. ä½¿ç”¨ Prettier è‡ªåŠ¨æ ¼å¼åŒ–
3. é…ç½® .eslintrc è§„åˆ™
4. è¿è¡Œ `npm run lint:fix`

## ğŸ› ï¸ é¢„é˜²æªæ–½

### 1. å¼€å‘é˜¶æ®µ

```bash
# å®æ—¶ç±»å‹æ£€æŸ¥
npm run type-check

# å®æ—¶ ESLint æ£€æŸ¥
npm run lint

# ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
# é…ç½® VS Code: "editor.formatOnSave": true
```

### 2. æäº¤å‰æ£€æŸ¥

```bash
# è¿è¡Œå®Œæ•´æ£€æŸ¥
npm run check

# è‡ªåŠ¨ä¿®å¤
npm run lint:fix
npm run format
```

### 3. CI/CD é›†æˆ

```yaml
# .github/workflows/ci.yml
- name: Type Check
  run: npm run type-check

- name: Lint
  run: npm run lint

- name: Format Check
  run: npm run format:check
```

## ğŸ“š å‚è€ƒèµ„æº

- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [ESLint è§„åˆ™](https://eslint.org/docs/rules/)
- [Ant Design TypeScript](https://ant.design/docs/react/use-with-typescript)
- [React TypeScript Cheatsheet](https://react-typescript-cheatsheet.netlify.app/)

## ğŸ”„ æ›´æ–°æ—¥å¿—

### 2024-01-01

- âœ… ä¿®å¤ MonacoEditor å°¾éšé€—å·é”™è¯¯
- âœ… ä¿®å¤ AuthModal ç±»å‹ä¸åŒ¹é…é”™è¯¯
- âœ… ä¿®å¤ MainLayout Props ä¸ä¸€è‡´é”™è¯¯
- â³ Button ç»„ä»¶ç±»å‹å†²çªå¾…ä¿®å¤
- â³ Card ç»„ä»¶ç±»å‹å†²çªå¾…ä¿®å¤
- â³ useDebounce Hook å‚æ•°é”™è¯¯å¾…ä¿®å¤

---

**ç»´æŠ¤è€…**ï¼šzsy619
**æœ€åæ›´æ–°**ï¼š2024å¹´
